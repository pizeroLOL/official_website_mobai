import{d as o,A as T,y as m}from"./hooks.module.z57d8FTj.js";import{W as j,A as E,L as O,d as V}from"./plat.BjNsOLYG.js";import{l as y}from"./favicon.B6KioVE-.js";import{u as e}from"./jsxRuntime.module.C14-XZ0T.js";import{k as H}from"./preact.module.CtyjANje.js";const R=({checked:a,onChange:r,className:d})=>e("button",{type:"button",role:"switch","aria-checked":a,onClick:()=>r(!a),className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-background ${a?"bg-blue-500":"bg-gray-600"} ${d}`,children:e("span",{"aria-hidden":"true",className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${a?"translate-x-5":"translate-x-0"}`})}),B=({latestVer:a,publishedDate:r,loading:d,size:g})=>e("a",{href:"https://classwidgets.rinlit.cn/download/",target:"_blank",rel:"noopener noreferrer",className:g==="auto"?"w-full h-full flex flex-col items-center justify-center p-4 bg-white/5 rounded-lg shadow-md border border-white/10":"p-4 bg-white/5 rounded-lg shadow-md inline-flex items-center gap-4 border border-white/10",children:d?e("span",{className:"text-sm text-gray-400",children:"正在获取最新版本信息..."}):e(H,{children:[e("img",{src:y.src,alt:"Class Widgets Logo",className:"size-12"}),e("div",{className:g==="auto"?"text-center":"",children:[e("span",{className:"text-lg font-semibold text-white block",children:["最新版本: ",a]}),r&&e("span",{className:"text-sm text-gray-400 block",children:["发布日期: ",r]})]})]})}),G=()=>{const[a,r]=o("windows"),[d,g]=o(0),[c,W]=o({width:0,left:0,top:0,height:0}),u=T(null),[C,k]=o(!1),[x,$]=o(!0),[f,w]=o(null),[L,b]=o(null),[v,z]=o(!0),S={"#win":"windows","#macos":"macos","#linux":"linux"},N=t=>{if(!u.current)return;const s=u.current.querySelector(`button[data-platform="${t}"]`);if(!s)return;const{offsetLeft:i,offsetTop:l,offsetWidth:A,offsetHeight:I}=s;W({left:i,top:l,width:A,height:I})};m(()=>{const t=()=>{const s=window.location.hash,i=S[s];if(i)r(i);else{const l=V();r(l)}};return t(),window.addEventListener("hashchange",t),()=>{window.removeEventListener("hashchange",t)}},[]),m(()=>{k(!0)},[]),m(()=>{N(a);const t=()=>N(a);return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[a]),m(()=>{(async()=>{try{const s=await fetch("https://ghfile.geekertao.top/https://api.github.com/repos/Class-Widgets/Class-Widgets/releases/latest");if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const i=await s.json();w(i.tag_name);const l=new Date(i.published_at);b(l.toLocaleDateString("zh-CN"))}catch(s){console.error("获取最新release失败:",s),w("v1.1.7.1"),b(null)}finally{z(!1)}})()},[]);const p=[{id:"windows",name:"Windows",icon:j},{id:"macos",name:"macOS",icon:E},{id:"linux",name:"Linux",icon:O}];m(()=>{const t=p.findIndex(s=>s.id===a);g(t)},[a]);const n=f||"v1.1.7.1",P="https://ghfile.geekertao.top/",h=t=>x?P+t:t,D={macos:{title:"MacOS下载",description:"支持 Apple Silicon 和 Intel 处理器。",downloads:[{name:n,type:"Apple Silicon",url:h(`https://github.com/Class-Widgets/Class-Widgets/releases/download/${n}/ClassWidgets-macOS-arm64.zip`)},{name:n,type:"Intel",url:h(`https://github.com/Class-Widgets/Class-Widgets/releases/download/${n}/ClassWidgets-macOS-x64.zip`)}]},windows:{title:"Windows下载",description:`支持 Windows7 及以上版本。
提供 x64 和 x86 版本。`,downloads:[{name:n,type:"x64",url:h(`https://github.com/Class-Widgets/Class-Widgets/releases/download/${n}/ClassWidgets-Windows-x64.zip`)},{name:n,type:"x86",url:h(`https://github.com/Class-Widgets/Class-Widgets/releases/download/${n}/ClassWidgets-Windows-x86.zip`)}]},linux:{title:"Linux下载",description:"暂时只支持 Debian，其他版本请敬请期待",downloads:[{name:n,type:"Debian",url:h(`https://github.com/Class-Widgets/Class-Widgets/releases/download/${n}/ClassWidgets-Debian10.zip`)}]}};return e("div",{className:`min-h-screen bg-background text-foreground transition-all duration-700 ease-out ${C?"opacity-100 translate-y-0":"opacity-0 translate-y-4"}`,children:e("div",{className:"max-w-6xl mx-auto px-8 py-16 md:px-12 lg:px-16",children:[e("div",{className:"mb-16",children:[e("h1",{className:"text-5xl font-bold mb-6 text-white","data-aos":"fade-right",children:"下载Class Widgets"}),e("p",{className:"text-xl text-gray-300 max-w-3xl leading-relaxed","data-aos":"fade-right",children:"下载 Class Widgets 应用程序以在您的设备上使用。我们提供了适用于 macOS、Windows 和 Linux 的版本，确保您可以在任何平台上享受我们的软件。"}),e("br",{}),e("div",{"data-aos":"fade-right",children:e(B,{latestVer:f,publishedDate:L,loading:v})}),e("div",{className:"mt-8 flex items-center","data-aos":"fade-right",children:[e(R,{checked:x,onChange:$,className:"mr-2"}),e("label",{htmlFor:"useProxyToggle",className:"text-gray-300",children:"使用代理下载 (如果直接下载速度慢，请勾选此项)"})]})]}),e("div",{className:"mb-12","data-aos":"zoom-in-right",children:e("div",{ref:u,className:"flex flex-wrap gap-2 bg-white/5 rounded-xl p-2 w-fit relative",children:[p.map(t=>{const s=t.icon;return e("button",{onClick:()=>{r(t.id);const i=t.id==="windows"?"win":t.id;history.replaceState(null,"",`#${i}`)},"data-platform":t.id,className:`flex items-center gap-2 px-6 py-3 rounded-lg transition-all duration-300 relative z-10 ${a===t.id?"text-black":"text-gray-300 hover:text-white hover:bg-white/10"}`,children:[e(s,{className:"size-5"}),e("span",{className:`font-medium ${a!==t.id?"hidden md:block":""}`,children:t.name})]},t.id)}),e("div",{className:"absolute rounded-lg bg-white transition-all duration-300 z-0",style:{left:`${c.left}px`,top:`${c.top}px`,width:`${c.width}px`,height:`${c.height}px`}})]})}),e("div",{className:"bg-white/5 rounded-2xl p-8 backdrop-blur-sm border border-white/10","data-aos":"zoom-out-right",children:e("div",{className:"flex items-start justify-between",children:[e("div",{className:"flex-1 overflow-hidden",children:e("div",{className:"flex transition-transform duration-300 ease-in-out",style:{transform:`translateX(-${d*100}%)`},children:p.map(t=>{const s=D[t.id];return e("div",{className:"w-full flex-shrink-0",children:[e("div",{className:"flex items-center gap-3 mb-4",children:[e(t.icon,{className:"size-8 text-white"}),e("h2",{className:"text-3xl font-semibold text-white",children:s.title})]}),e("p",{className:"text-gray-300 mb-8 whitespace-pre-line leading-relaxed",children:s.description}),e("div",{className:"space-y-4",children:v?e("p",{className:"text-gray-400",children:"正在加载最新版本信息..."}):s.downloads.map((i,l)=>e("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-xl border border-white/10 hover:bg-white/10 transition-all duration-300",children:[e("div",{className:"flex items-center gap-4",children:e("div",{children:e("div",{className:"flex items-center gap-2",children:[e("span",{className:"text-lg font-medium text-white",children:i.name}),e("span",{className:`px-2 py-1 rounded-md text-xs font-medium ${i.type==="Beta"?"bg-orange-500/20 text-orange-300 border border-orange-500/30":"bg-green-500/20 text-green-300 border border-green-500/30"}`,children:i.type})]})})}),e("a",{href:i.url,className:"flex items-center gap-2 bg-white text-black px-6 py-2 rounded-lg font-medium hover:bg-gray-100 transition-all duration-300",children:[e("svg",{className:"size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"下载"]})]},l))})]},t.id)})})}),e("div",{className:"ml-8 hidden lg:block",children:e("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 rounded-3xl p-6 shadow-2xl border border-white/10",children:e("img",{src:y.src,alt:"Class Widgets",className:"size-32 rounded-2xl"})})})]})}),e("div",{className:"mt-12 text-center",children:[e("p",{className:"text-gray-400 mb-4",children:["需要帮助？前往我们的"," ",e("a",{href:"https://github.com/Class-Widgets/Class-Widgets",children:"Github"})," ","或者加入"," ",e("a",{href:"https://github.com/orgs/Class-Widgets/discussions",children:"社群"})]}),e("p",{className:"text-sm text-gray-500",children:"所有下载均经过数字签名和安全验证"})]})]})})};export{G as default};
